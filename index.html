<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saga Directory Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'saga-green': '#2e8b57',
                        'saga-light-green': '#e6f7ef',
                        'saga-hover': '#d1e7dd',
                    }
                }
            }
        }
    </script>
    <style>
        .modal {
            transition: opacity 0.25s ease;
        }

        body.modal-active {
            overflow-x: hidden;
            overflow-y: visible !important;
        }

        .hidden {
            display: none;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-button.active {
            color: #059669;
            border-bottom-color: #059669;
        }
    </style>
</head>

<body class="bg-white">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="w-64 bg-white shadow-md flex-shrink-0 hidden md:block" id="sidebar">
            <!-- Directory Management Header -->
            <div class="flex items-center p-4 bg-green-500 text-white cursor-pointer" id="directory-header">
                <span class="font-medium">Directory Management</span>
                <div class="ml-auto">
                    <i class="fas fa-chevron-right" id="expand-icon"></i>
                </div>
            </div>

            <!-- Submenu -->
            <div class="py-2 hidden" id="directory-submenu">
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-green-100" data-view="organization">
                    <div class="w-6 mr-3 flex justify-center">
                        <i class="fas fa-building"></i>
                    </div>
                    <span>Organization</span>
                </div>
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-green-100" data-view="domains">
                    <div class="w-6 mr-3 flex justify-center">
                        <i class="fas fa-globe"></i>
                    </div>
                    <span>Domains</span>
                </div>
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-green-100" data-view="users">
                    <div class="w-6 mr-3 flex justify-center">
                        <i class="fas fa-users"></i>
                    </div>
                    <span>Users</span>
                </div>
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-green-100" data-view="admins">
                    <div class="w-6 mr-3 flex justify-center">
                        <i class="fas fa-user-cog"></i>
                    </div>
                    <span>Admins</span>
                </div>
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-green-100" data-view="groups">
                    <div class="w-6 mr-3 flex justify-center">
                        <i class="fas fa-users-cog"></i>
                    </div>
                    <span>Groups</span>
                </div>
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-green-100" data-view="departments">
                    <div class="w-6 mr-3 flex justify-center">
                        <i class="fas fa-th-large"></i>
                    </div>
                    <span>Departments</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-6 overflow-auto" id="main-content">
            <!-- Default View -->
            <div id="default-view" class="flex items-center justify-center h-full text-gray-500">
                <p>Select an option from Directory Management to view details</p>
            </div>

            <!-- Organization View -->
            <div id="organization-view" class="space-y-6 hidden">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-2xl font-bold">Organization Information</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex flex-col">
                            <span class="font-semibold text-gray-800">Company Name</span>
                            <span>
                                <a href="" target="_blank" class="text-green-600 text-sm hover:underline">
                                    directory.Saga.in/directory/com
                                </a>
                                <i class="fas fa-question-circle text-green-400 ml-2 cursor-pointer" title="More info"
                                    onclick="showUniqueUrlMessage(event, 'directory.Saga.in/directory/com');"></i>
                                <span id="unique-url-message"
                                    class="ml-2 text-xs text-green-700 bg-green-50 px-2 py-1 rounded shadow hidden absolute z-50"></span>
                        </div>
                    </div>
                </div>

                <div class="flex gap-2 mt-0 mb-1 bg-green-50">
                    <button
                        class="tab-button px-4 py-2 text-green-700 border-b-2 border-green-500 whitespace-nowrap active"
                        data-tab="info">Organization Info</button>
                    <button
                        class="tab-button px-4 py-2 hover:text-green-700 border-b-2 border-green-500 whitespace-nowrap"
                        data-tab="office">Work Locations</button>
                    <button
                        class="tab-button px-4 py-2 hover:text-green-700 border-b-2 border-green-500 whitespace-nowrap"
                        data-tab="destination">Designations</button>
                </div>

                <!-- Organization Info Tab Content -->
                <div id="info-content" class="tab-content active">
                    <!-- Read-only Organization Info -->
                    <div id="organization-readonly" class="bg-white rounded-lg border shadow-sm">
                        <div
                            class="flex flex-col md:flex-row items-start md:items-center justify-between mx-6 mt-4 mb-2">
                            <div class="flex items-center gap-2">
                                <div>
                                    <span class="flex flex-row items-center gap-2">
                                        <i class="fas fa-crown text-yellow-500 text-lg" title="Owner"></i>
                                        <div class="text-green-700 font-medium">Alex Johnson</div>
                                        <button
                                            class="ml-2 px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200">Change
                                            Owner</button>
                                    </span>
                                    <span class="text-gray-600 text-sm block">AlexJohnson@gmail.com</span>
                                </div>
                            </div>
                            <button
                                class="mt-2 md:mt-0 px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-1"
                                id="edit-organization-btn">
                                <i class="fas fa-edit"></i>
                                Edit
                            </button>
                        </div>
                        <hr class="my-2 border-gray-200">
                        <div class="p-2 flex items-center justify-between">
                            <div>
                                <h2 class="text-xl font-semibold" id="readonly-company-name">Acme Corporation</h2>
                                <p class="text-gray-500" id="readonly-company-type">Technology Company</p>
                            </div>
                        </div>
                        <div class="px-3 pb-3 space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Organization ID</h3>
                                    <p id="readonly-org-id">ORG-12345</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Founded</h3>
                                    <p id="readonly-founded">January 15, 2010</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Headquarters</h3>
                                    <p id="readonly-headquarters">New York, USA</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Employees</h3>
                                    <p id="readonly-employees">1,250</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Saga Url</h3>
                                    <p id="readonly-saga-url">sagasoft.io</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Website</h3>
                                    <p id="readonly-website">www.acmecorp.com</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Industry</h3>
                                    <p id="readonly-industry">Technology</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg border shadow-sm mt-2">
                            <div class="p-3">
                                <h2 class="text-xl font-semibold">Contact Information</h2>
                            </div>
                            <div class="px-3 pb-3">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500">Primary Email</h3>
                                        <p id="readonly-primary-email">contact@acmecorp.com</p>
                                    </div>
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500">Phone</h3>
                                        <p id="readonly-phone">+1 (555) 123-4567</p>
                                    </div>
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500">Address</h3>
                                        <p id="readonly-address">123 Tech Avenue, New York, NY 10001, USA</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Read-only Contact Information -->
                    <!-- <div class="bg-white rounded-lg border shadow-sm mt-2">
                        <div class="p-3">
                            <h2 class="text-xl font-semibold">Contact Information</h2>
                        </div>
                        <div class="px-3 pb-3">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Primary Email</h3>
                                    <p id="readonly-primary-email">contact@acmecorp.com</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Phone</h3>
                                    <p id="readonly-phone">+1 (555) 123-4567</p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-500">Address</h3>
                                    <p id="readonly-address">123 Tech Avenue, New York, NY 10001, USA</p>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <!-- Edit Form (Hidden by default) -->
                    <div id="organization-edit-form" class="hidden">
                        <!-- Organization Information Form -->
                        <div class="bg-white rounded-lg border shadow-sm">
                            <!-- Header Section -->
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="mb-4">
                                            <label for="company-name"
                                                class="block text-sm font-medium text-gray-700 mb-2">Company
                                                Name</label>
                                            <input type="text" id="company-name" value="Acme Corporation"
                                                class="text-2xl font-bold border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-green-500 focus:outline-none w-full" />
                                        </div>
                                        <div>
                                            <label for="company-type"
                                                class="block text-sm font-medium text-gray-700 mb-2">Company
                                                Type</label>
                                            <input type="text" id="company-type" value="Technology Company"
                                                class="text-gray-500 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-green-500 focus:outline-none w-full" />
                                        </div>
                                    </div>
                                    <span
                                        class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">
                                        Active
                                    </span>
                                </div>
                            </div>

                            <!-- Organization Details Form -->
                            <div class="p-6">
                                <form id="organization-form" class="space-y-6">
                                    <!-- Organization Information Grid -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <!-- Organization ID -->
                                        <div>
                                            <label for="org-id"
                                                class="block text-sm font-medium text-gray-500 mb-2">Organization
                                                ID</label>
                                            <input type="text" id="org-id" value="ORG-12345"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>

                                        <!-- Founded -->
                                        <div>
                                            <label for="founded"
                                                class="block text-sm font-medium text-gray-500 mb-2">Founded</label>
                                            <input type="date" id="founded" value="2010-01-15"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>

                                        <!-- Headquarters -->
                                        <div>
                                            <label for="headquarters"
                                                class="block text-sm font-medium text-gray-500 mb-2">Headquarters</label>
                                            <input type="text" id="headquarters" value="New York, USA"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>

                                        <!-- Employees -->
                                        <div>
                                            <label for="employees"
                                                class="block text-sm font-medium text-gray-500 mb-2">Employees</label>
                                            <input type="number" id="employees" value="1250"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>

                                        <!-- Saga URL -->
                                        <div>
                                            <label for="saga-url"
                                                class="block text-sm font-medium text-gray-500 mb-2">Saga
                                                URL</label>
                                            <input type="url" id="saga-url" value="sagasoft.io"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>

                                        <!-- Website -->
                                        <div>
                                            <label for="website"
                                                class="block text-sm font-medium text-gray-500 mb-2">Website</label>
                                            <input type="url" id="website" value="www.acmecorp.com"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>
                                    </div>

                                    <!-- Industry -->
                                    <div>
                                        <label for="industry"
                                            class="block text-sm font-medium text-gray-500 mb-2">Industry</label>
                                        <select id="industry"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                            <option value="Technology" selected>Technology</option>
                                            <option value="Healthcare">Healthcare</option>
                                            <option value="Finance">Finance</option>
                                            <option value="Manufacturing">Manufacturing</option>
                                            <option value="Retail">Retail</option>
                                            <option value="Education">Education</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>

                                    <!-- Description -->
                                    <!-- <div>
                                        <label for="description"
                                            class="block text-sm font-medium text-gray-500 mb-2">Description</label>
                                        <textarea id="description" rows="4"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                            placeholder="Enter company description...">Acme Corporation is a leading technology company specializing in innovative software solutions for enterprise clients. With a focus on cloud computing, artificial intelligence, and cybersecurity, Acme has established itself as a trusted partner for businesses worldwide.</textarea>
                                    </div> -->
                                </form>
                            </div>
                        </div>

                        <!-- Contact Information Form -->
                        <div class="bg-white rounded-lg border shadow-sm mt-6">
                            <div class="p-6">
                                <h2 class="text-xl font-semibold mb-6">Contact Information</h2>

                                <form class="space-y-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <!-- Primary Email -->
                                        <div>
                                            <label for="primary-email"
                                                class="block text-sm font-medium text-gray-500 mb-2">Primary
                                                Email</label>
                                            <input type="email" id="primary-email" value="contact@acmecorp.com"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>

                                        <!-- Phone -->
                                        <div>
                                            <label for="phone"
                                                class="block text-sm font-medium text-gray-500 mb-2">Phone</label>
                                            <input type="tel" id="phone" value="+1 (555) 123-4567"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                                        </div>
                                    </div>

                                    <!-- Address -->
                                    <div>
                                        <label for="address"
                                            class="block text-sm font-medium text-gray-500 mb-2">Address</label>
                                        <textarea id="address" rows="3"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">123 Tech Avenue, New York, NY 10001, USA</textarea>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex justify-end gap-4 mt-6">
                            <button type="button" id="cancel-edit-btn"
                                class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors">
                                Cancel
                            </button>
                            <button type="submit" id="save-organization-btn"
                                class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors flex items-center gap-2">
                                <i class="fas fa-save"></i>
                                Save Changes
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Work Locations Tab Content -->
                <div id="office-content" class="tab-content">
                    <div class="bg-white rounded-lg border shadow-sm">
                        <div class="p-3">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-1">
                                <h2 class="text-xl font-semibold">Work Locations</h2>
                                <button
                                    class="px-2 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                                    id="add-location-btn">
                                    <i class="fas fa-plus"></i>
                                    Add Work Location
                                </button>
                            </div>

                            <!-- Search Bar -->
                            <div class="relative mb-1">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                <input type="text" placeholder="Search Location"
                                    class="pl-10 pr-4 py-1 w-full md:w-80 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                    id="location-search">
                            </div>
                        </div>

                        <div class="px-6 pb-6">
                            <!-- Locations Table -->
                            <div class="overflow-x-auto">
                                <table class="w-full border-collapse">
                                    <thead>
                                        <tr class="border-b bg-green-50">
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">LOCATION
                                            </th>
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">USERS</th>
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">ACTIONS
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="locations-table-body">
                                        <!-- Locations will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Empty State -->
                            <div id="locations-empty-state" class="text-center py-12 hidden">
                                <i class="fas fa-map-marker-alt text-4xl text-green-300 mb-4"></i>
                                <p class="text-gray-500 mb-4">No work locations found</p>
                                <button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600"
                                    onclick="document.getElementById('add-location-btn').click()">
                                    Add Your First Location
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Designations Tab Content -->
                <div id="destination-content" class="tab-content">
                    <div class="bg-white rounded-lg border shadow-sm">
                        <div class="p-3">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-1">
                                <h2 class="text-xl font-semibold">Designations</h2>
                                <button
                                    class="px-2 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                                    id="add-designation-btn">
                                    <i class="fas fa-plus"></i>
                                    Add Designation
                                </button>
                            </div>

                            <!-- Search Bar -->
                            <div class="relative mb-1">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                <input type="text" placeholder="Search Designations"
                                    class="pl-10 pr-4 py-1 w-full md:w-80 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                    id="designation-search">
                            </div>
                        </div>

                        <div class="px-6 pb-6">
                            <!-- Designations Table -->
                            <div class="overflow-x-auto">
                                <table class="w-full border-collapse">
                                    <thead>
                                        <tr class="border-b bg-green-50">
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">
                                                DESIGNATION</th>
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">USERS</th>
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">CREATED ON
                                            </th>
                                            <th class="text-left py-2 px-2 font-medium text-gray-600 text-sm">ACTIONS
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="designations-table-body">
                                        <!-- Designations will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Empty State -->
                            <div id="designations-empty-state" class="text-center py-12 hidden">
                                <i class="fas fa-user-tag text-4xl text-gray-300 mb-4"></i>
                                <p class="text-gray-500 mb-4">No designations found</p>
                                <button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600"
                                    onclick="document.getElementById('add-designation-btn').click()">
                                    Add Your First Designation
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Domains View -->
            <div id="domains-view" class="space-y-6 hidden">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">Domain Management</h1>
                    <button
                        class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                        id="add-domain-btn">
                        <i class="fas fa-plus-circle"></i>
                        Add Domain
                    </button>
                </div>

                <div class="bg-white rounded-lg border shadow-sm">
                    <div class="p-6">
                        <h2 class="text-xl font-semibold">Registered Domains</h2>
                    </div>
                    <div class="px-6 pb-6">
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse" id="domains-table">
                                <thead>
                                    <tr class="border-b">
                                        <th class="text-left py-3 px-4">Domain Name</th>
                                        <th class="text-left py-3 px-4">Status</th>
                                        <th class="text-left py-3 px-4">Primary</th>
                                        <th class="text-left py-3 px-4">Date Added</th>
                                        <th class="text-left py-3 px-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Domains will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users View -->
            <div id="users-view" class="space-y-6 hidden">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">Users</h1>
                    <button
                        class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                        id="add-user-btn">
                        <i class="fas fa-plus-circle"></i>
                        Add User
                    </button>
                </div>

                <div class="bg-white rounded-lg border shadow-sm">
                    <div class="p-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <h2 class="text-xl font-semibold">User Management</h2>
                            <div class="flex flex-col sm:flex-row gap-2">
                                <div class="relative">
                                    <i class="fas fa-search absolute left-3 top-3 text-gray-500"></i>
                                    <input type="text" placeholder="Search users..."
                                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                </div>
                                <button
                                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-600 hover:bg-gray-50 flex items-center gap-2">
                                    <i class="fas fa-filter"></i>
                                    Filter
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="px-6 pb-6">
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse" id="users-table">
                                <thead>
                                    <tr class="border-b">
                                        <th class="text-left py-3 px-4">Name</th>
                                        <th class="text-left py-3 px-4">Email</th>
                                        <th class="text-left py-3 px-4">Department</th>
                                        <th class="text-left py-3 px-4">Role</th>
                                        <th class="text-left py-3 px-4">Status</th>
                                        <th class="text-left py-3 px-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Users will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4 text-sm text-gray-500" id="users-count">Showing 0 users</div>
                    </div>
                </div>
            </div>

            <!-- Admins View -->
            <div id="admins-view" class="space-y-6 hidden">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">Administrators</h1>
                    <button
                        class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                        id="add-admin-btn">
                        <i class="fas fa-plus-circle"></i>
                        Add Admin
                    </button>
                </div>

                <div class="bg-white rounded-lg border shadow-sm">
                    <div class="p-6">
                        <h2 class="text-xl font-semibold">Admin Management</h2>
                    </div>
                    <div class="px-6 pb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="admins-container">
                            <!-- Admins will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Groups View -->
            <div id="groups-view" class="space-y-6 hidden">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">Groups</h1>
                    <button
                        class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                        id="add-group-btn">
                        <i class="fas fa-plus-circle"></i>
                        Create a New Group
                    </button>
                </div>

                <div class="bg-white rounded-lg border shadow-sm">
        <div class="p-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <h2 class="text-xl font-semibold">Group Management</h2>
                <div class="flex flex-col sm:flex-row gap-2">
                    <div class="relative">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-500"></i>
                        <input type="text" placeholder="Search groups..."
                            class="pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                            id="group-search">
                    </div>
                    <button
                        class="px-4 py-2 border border-gray-300 rounded-md text-gray-600 hover:bg-gray-50 flex items-center gap-2">
                        <i class="fas fa-filter"></i>
                        Filter
                    </button>
                </div>
            </div>
        </div>
        <div class="px-6 pb-6">
            <div class="overflow-x-auto">
                <table class="w-full border-collapse" id="groups-table">
                    <thead>
                        <tr class="border-b bg-green-50">
                            <th class="text-left py-3 px-4 font-medium text-gray-600">GROUP NAME</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-600">TYPE</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-600">MEMBERS</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-600">MODERATORS</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-600">CREATED</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-600">ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Groups will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="mt-4 text-sm text-gray-500" id="groups-count">Showing 0 groups</div>
        </div>
    </div>

    <!-- Empty State -->
    <div id="groups-empty-state" class="text-center py-12 hidden">
        <i class="fas fa-users-cog text-4xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 mb-4">Group users for easy administration</p>
        <p class="text-gray-400 text-sm mb-6">Create groups to provision app access and enforce security policies for multiple users simultaneously.</p>
        <button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600"
            onclick="document.getElementById('add-group-btn').click()">
            Create a New Group
        </button>
    </div>
</div>

            <!-- Departments View -->
            <div id="departments-view" class="space-y-6 hidden">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">Departments</h1>
                    <button
                        class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center gap-2"
                        id="add-department-btn">
                        <i class="fas fa-plus-circle"></i>
                        Add Department
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white rounded-lg border shadow-sm">
                        <div class="p-6">
                            <div class="text-center">
                                <p class="text-sm font-medium text-gray-500">Total Departments</p>
                                <h3 class="text-3xl font-bold mt-1" id="total-departments">0</h3>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg border shadow-sm">
                        <div class="p-6">
                            <div class="text-center">
                                <p class="text-sm font-medium text-gray-500">Total Employees</p>
                                <h3 class="text-3xl font-bold mt-1" id="total-employees">0</h3>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg border shadow-sm">
                        <div class="p-6">
                            <div class="text-center">
                                <p class="text-sm font-medium text-gray-500">Active Projects</p>
                                <h3 class="text-3xl font-bold mt-1" id="total-projects">0</h3>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg border shadow-sm">
                        <div class="p-6">
                            <div class="text-center">
                                <p class="text-sm font-medium text-gray-500">Budget Utilization</p>
                                <h3 class="text-3xl font-bold mt-1" id="budget-utilization">0%</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg border shadow-sm">
                    <div class="p-6">
                        <h2 class="text-xl font-semibold">Department Management</h2>
                    </div>
                    <div class="px-6 pb-6">
                        <div class="space-y-4" id="departments-container">
                            <!-- Departments will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- All existing modals remain the same... -->
    <!-- Add Designation Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-designation-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-xl font-bold">Add Designation</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times text-gray-500 hover:text-gray-700"></i>
                    </div>
                </div>

                <form id="add-designation-form" class="mt-6">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2" for="designation-name">
                            Designation name <span class="text-red-500">*</span>
                        </label>
                        <input
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                            id="designation-name" type="text" placeholder="Manager, Recruiter, etc." required>
                    </div>

                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-medium mb-2">
                            Choose existing users (or) new users
                        </label>
                        <div class=" rounded-md p-4 min-h-[100px] bg-gray-50">
                            <!-- User Search Input -->
                            <div class="mb-2">
                                <div class="relative flex items-center">
                                    <input type="text" id="designation-user-search"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                        placeholder="Search users">
                                    <button type="button" class="ml-2 flex-shrink-0">
                                        <i class="fas fa-plus text-green-600 hover:text-green-800"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex items-center justify-center h-16">
                            </div>
                            <div id="selected-users" class="space-y-2 hidden">

                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end pt-4 border-t gap-3">
                        <button type="button"
                            class="modal-close px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">
                            Add
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Work Location Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-location-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div
            class="modal-container bg-white w-11/12 md:max-w-2xl mx-auto rounded shadow-lg z-50 overflow-y-auto max-h-screen">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-xl font-bold">Add Work Location</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times text-gray-500 hover:text-gray-700"></i>
                    </div>
                </div>

                <form id="add-location-form" class="mt-6">
                    <!-- Location Title -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-green-600 mb-4">LOCATION TITLE</h3>
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="location-name">
                                Location Name <span class="text-red-500">*</span>
                            </label>
                            <input
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                id="location-name" type="text" placeholder="e.g., New York Office" required>
                        </div>
                    </div>

                    <!-- Address Information -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-green-600 mb-4">ADDRESS INFORMATION</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-street">
                                    Street <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-street" type="text" placeholder="123 Main Street" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-city">
                                    City <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-city" type="text" placeholder="New York" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-state">
                                    State <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-state" type="text" placeholder="New York" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-zip">
                                    Zip/Postal Code <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-zip" type="text" placeholder="10001" required>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-country">
                                    Country <span class="text-red-500">*</span>
                                </label>
                                <select
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-country" required>
                                    <option value="">-- Select --</option>
                                    <option value="United States">United States</option>
                                    <option value="Canada">Canada</option>
                                    <option value="United Kingdom">United Kingdom</option>
                                    <option value="Germany">Germany</option>
                                    <option value="France">France</option>
                                    <option value="Japan">Japan</option>
                                    <option value="Australia">Australia</option>
                                    <option value="India">India</option>
                                    <option value="China">China</option>
                                    <option value="Singapore">Singapore</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Regional Information -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-green-600 mb-4">REGIONAL INFORMATION</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-timezone">
                                    Time Zone
                                </label>
                                <select
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-timezone">
                                    <option value="">-- Select --</option>
                                    <option value="EST">Eastern Standard Time (EST)</option>
                                    <option value="CST">Central Standard Time (CST)</option>
                                    <option value="MST">Mountain Standard Time (MST)</option>
                                    <option value="PST">Pacific Standard Time (PST)</option>
                                    <option value="GMT">Greenwich Mean Time (GMT)</option>
                                    <option value="CET">Central European Time (CET)</option>
                                    <option value="JST">Japan Standard Time (JST)</option>
                                    <option value="AEST">Australian Eastern Standard Time (AEST)</option>
                                    <option value="IST">India Standard Time (IST)</option>
                                    <option value="SGT">Singapore Time (SGT)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="location-language">
                                    Language
                                </label>
                                <select
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="location-language">
                                    <option value="">-- Select --</option>
                                    <option value="English">English</option>
                                    <option value="Spanish">Spanish</option>
                                    <option value="French">French</option>
                                    <option value="German">German</option>
                                    <option value="Japanese">Japanese</option>
                                    <option value="Chinese">Chinese</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="Portuguese">Portuguese</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Primary Location Checkbox -->
                    <div class="mb-6">
                        <label class="flex items-center">
                            <input type="checkbox" class="form-checkbox h-4 w-4 text-green-600" id="location-primary">
                            <span class="ml-2 text-sm text-gray-700">Set as Primary Location</span>
                        </label>
                    </div>

                    <div class="flex justify-end pt-4 border-t gap-3">
                        <button type="button"
                            class="modal-close px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">
                            Add
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Work Location Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="edit-location-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div
            class="modal-container bg-white w-11/12 md:max-w-2xl mx-auto rounded shadow-lg z-50 overflow-y-auto max-h-screen">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-xl font-bold">Edit Location</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times text-gray-500 hover:text-gray-700"></i>
                    </div>
                </div>

                <form id="edit-location-form" class="mt-6">
                    <!-- Same form structure as add modal but with edit- prefixed IDs -->
                    <!-- Location Title -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-green-600 mb-4">LOCATION TITLE</h3>
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="edit-location-name">
                                Location Name <span class="text-red-500">*</span>
                            </label>
                            <input
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                id="edit-location-name" type="text" required>
                        </div>
                    </div>

                    <!-- Address Information -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-green-600 mb-4">ADDRESS INFORMATION</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="edit-location-street">
                                    Street <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-street" type="text" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="edit-location-city">
                                    City <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-city" type="text" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="edit-location-state">
                                    State <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-state" type="text" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="edit-location-zip">
                                    Zip/Postal Code <span class="text-red-500">*</span>
                                </label>
                                <input
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-zip" type="text" required>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-gray-700 text-sm font-medium mb-2" for="edit-location-country">
                                    Country <span class="text-red-500">*</span>
                                </label>
                                <select
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-country" required>
                                    <option value="">-- Select --</option>
                                    <option value="United States">United States</option>
                                    <option value="Canada">Canada</option>
                                    <option value="United Kingdom">United Kingdom</option>
                                    <option value="Germany">Germany</option>
                                    <option value="France">France</option>
                                    <option value="Japan">Japan</option>
                                    <option value="Australia">Australia</option>
                                    <option value="India">India</option>
                                    <option value="China">China</option>
                                    <option value="Singapore">Singapore</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Regional Information -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-green-600 mb-4">REGIONAL INFORMATION</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2"
                                    for="edit-location-timezone">
                                    Time Zone
                                </label>
                                <select
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-timezone">
                                    <option value="">-- Select --</option>
                                    <option value="EST">Eastern Standard Time (EST)</option>
                                    <option value="CST">Central Standard Time (CST)</option>
                                    <option value="MST">Mountain Standard Time (MST)</option>
                                    <option value="PST">Pacific Standard Time (PST)</option>
                                    <option value="GMT">Greenwich Mean Time (GMT)</option>
                                    <option value="CET">Central European Time (CET)</option>
                                    <option value="JST">Japan Standard Time (JST)</option>
                                    <option value="AEST">Australian Eastern Standard Time (AEST)</option>
                                    <option value="IST">India Standard Time (IST)</option>
                                    <option value="SGT">Singapore Time (SGT)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2"
                                    for="edit-location-language">
                                    Language
                                </label>
                                <select
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                    id="edit-location-language">
                                    <option value="">-- Select --</option>
                                    <option value="English">English</option>
                                    <option value="Spanish">Spanish</option>
                                    <option value="French">French</option>
                                    <option value="German">German</option>
                                    <option value="Japanese">Japanese</option>
                                    <option value="Chinese">Chinese</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="Portuguese">Portuguese</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Primary Location Checkbox -->
                    <div class="mb-6">
                        <label class="flex items-center">
                            <input type="checkbox" class="form-checkbox h-4 w-4 text-green-600"
                                id="edit-location-primary">
                            <span class="ml-2 text-sm text-gray-700">Set as Primary Location</span>
                        </label>
                    </div>

                    <div class="flex justify-end pt-4 border-t gap-3">
                        <button type="button"
                            class="modal-close px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">
                            Update
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Domain Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-domain-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3">
                    <p class="text-xl font-bold">Add Domain</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times"></i>
                    </div>
                </div>

                <form id="add-domain-form">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="domain-name">
                            Domain Name
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="domain-name" type="text" placeholder="example.com" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="domain-status">
                            Status
                        </label>
                        <select
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="domain-status">
                            <option value="Verified">Verified</option>
                            <option value="Pending">Pending</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">
                            Set as Primary
                        </label>
                        <div class="mt-2">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox" id="domain-primary">
                                <span class="ml-2">Make this the primary domain</span>
                            </label>
                        </div>
                    </div>

                    <div class="flex justify-end pt-2">
                        <button type="button"
                            class="modal-close px-4 bg-gray-200 p-3 rounded-lg text-black hover:bg-gray-300 mr-2">Cancel</button>
                        <button type="submit" class="px-4 bg-green-500 p-3 rounded-lg text-white hover:bg-green-600">Add
                            Domain</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-user-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3">
                    <p class="text-xl font-bold">Add User</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times"></i>
                    </div>
                </div>

                <form id="add-user-form">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="user-name">
                            Full Name
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="user-name" type="text" placeholder="John Doe" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="user-email">
                            Email
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="user-email" type="email" placeholder="john.doe@example.com" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="user-department">
                            Department
                        </label>
                        <select
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="user-department">
                            <option value="Engineering">Engineering</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Sales">Sales</option>
                            <option value="HR">HR</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="user-role">
                            Role
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="user-role" type="text" placeholder="Developer" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="user-status">
                            Status
                        </label>
                        <select
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="user-status">
                            <option value="Active">Active</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                    </div>

                    <div class="flex justify-end pt-2">
                        <button type="button"
                            class="modal-close px-4 bg-gray-200 p-3 rounded-lg text-black hover:bg-gray-300 mr-2">Cancel</button>
                        <button type="submit" class="px-4 bg-green-500 p-3 rounded-lg text-white hover:bg-green-600">Add
                            User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Admin Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-admin-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3">
                    <p class="text-xl font-bold">Add Administrator</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times"></i>
                    </div>
                </div>

                <form id="add-admin-form">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="admin-name">
                            Full Name
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="admin-name" type="text" placeholder="Jane Smith" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="admin-email">
                            Email
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="admin-email" type="email" placeholder="jane.smith@example.com" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="admin-role">
                            Admin Role
                        </label>
                        <select
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="admin-role">
                            <option value="Super Admin">Super Admin</option>
                            <option value="System Admin">System Admin</option>
                            <option value="Department Admin">Department Admin</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="admin-permissions">
                            Permissions
                        </label>
                        <select
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="admin-permissions">
                            <option value="Full Access">Full Access</option>
                            <option value="Limited Access">Limited Access</option>
                            <option value="Engineering Only">Engineering Only</option>
                            <option value="Marketing Only">Marketing Only</option>
                            <option value="Sales Only">Sales Only</option>
                            <option value="HR Only">HR Only</option>
                        </select>
                    </div>

                    <div class="flex justify-end pt-2">
                        <button type="button"
                            class="modal-close px-4 bg-gray-200 p-3 rounded-lg text-black hover:bg-gray-300 mr-2">Cancel</button>
                        <button type="submit" class="px-4 bg-green-500 p-3 rounded-lg text-white hover:bg-green-600">Add
                            Admin</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Department Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-department-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3">
                    <p class="text-xl font-bold">Add Department</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times"></i>
                    </div>
                </div>

                <form id="add-department-form">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="department-name">
                            Department Name
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="department-name" type="text" placeholder="Research & Development" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="department-head">
                            Department Head
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="department-head" type="text" placeholder="John Smith" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="department-members">
                            Number of Members
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="department-members" type="number" min="1" placeholder="15" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="department-budget">
                            Budget Allocation
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="department-budget" type="text" placeholder="$500,000" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="department-projects">
                            Number of Projects
                        </label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="department-projects" type="number" min="0" placeholder="5" required>
                    </div>

                    <div class="flex justify-end pt-2">
                        <button type="button"
                            class="modal-close px-4 bg-gray-200 p-3 rounded-lg text-black hover:bg-gray-300 mr-2">Cancel</button>
                        <button type="submit" class="px-4 bg-green-500 p-3 rounded-lg text-white hover:bg-green-600">Add
                            Department</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Group Modal -->
    <div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50"
        id="add-group-modal">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

        <div class="modal-container bg-white w-11/12 md:max-w-lg mx-auto rounded shadow-lg z-50 overflow-y-auto max-h-screen">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-xl font-bold">Add Group</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times text-gray-500 hover:text-gray-700"></i>
                    </div>
            </div>

            <form id="add-group-form" class="mt-6">
                <!-- Group Name -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2" for="group-name">
                        Group Name <span class="text-red-500">*</span>
                    </label>
                    <input
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                        id="group-name" type="text" placeholder="Human Resources, Planning Committee, etc." required>
                </div>

                <!-- Description -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2" for="group-description">
                        Description
                    </label>
                    <textarea
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                        id="group-description" rows="3" placeholder="Enter group description..."></textarea>
                </div>

                <!-- Type -->
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-3">Type</label>
                    <div class="space-y-3">
                        <label class="flex items-start cursor-pointer">
                            <input type="radio" name="group-type" value="collaboration" class="mt-1 mr-3" checked>
                            <div class="flex items-start">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3 mt-0">
                                    <i class="fas fa-users text-green-600 text-sm"></i>
                                </div>
                                <div>
                                    <div class="font-medium">Collaboration Group</div>
                                    <div class="text-sm text-gray-500">A user can belong to multiple groups.</div>
                                </div>
                            </div>
                        </label>
                        <label class="flex items-start cursor-pointer">
                            <input type="radio" name="group-type" value="department" class="mt-1 mr-3">
                            <div class="flex items-start">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0">
                                    <i class="fas fa-building text-blue-600 text-sm"></i>
                                </div>
                                <div>
                                    <div class="font-medium">Department</div>
                                    <div class="text-sm text-gray-500">A user can belong to only one department.</div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Department Head (only shown for department type) -->
                <div class="mb-6 hidden" id="department-head-section">
                    <label class="block text-gray-700 text-sm font-medium mb-2" for="department-head">
                        Department Head <span class="text-red-500">*</span>
                    </label>
                    <div class="relative">
                        <input
                            class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                            id="department-head" type="text" placeholder="Select department head">
                        <i class="fas fa-user absolute right-3 top-3 text-gray-400"></i>
                    </div>
                </div>

                <!-- Moderators -->
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                        Moderators
                    </label>
                    <div class="border border-gray-300 rounded-md p-4 min-h-[60px] bg-gray-50">
                        <div class="flex items-center justify-center h-12">
                            <button type="button" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-plus mr-2"></i>Add Moderators
                            </button>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Moderator has the privileges to add or remove members and manage group settings.</p>
                </div>

                <!-- Members -->
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                        Members
                    </label>
                    <div class="border border-gray-300 rounded-md p-4 min-h-[60px] bg-gray-50">
                        <div class="flex items-center justify-center h-12">
                            <button type="button" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-plus mr-2"></i>Add Members
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Follower (only shown for department type) -->
                <div class="mb-6 hidden" id="follower-section">
                    <label class="block text-gray-700 text-sm font-medium mb-2">
                        Follower
                    </label>
                    <div class="border border-gray-300 rounded-md p-4 min-h-[60px] bg-gray-50">
                        <div class="flex items-center justify-center h-12">
                            <button type="button" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-plus mr-2"></i>Add Followers
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end pt-4 border-t gap-3">
                    <button type="button"
                        class="modal-close px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">
                        Add
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

    <script>
        // Initial data
        let domains = [
            { id: 1, name: "acmecorp.com", status: "Verified", primary: true, added: "Jan 15, 2022" },
            { id: 2, name: "acme-tech.com", status: "Verified", primary: false, added: "Mar 22, 2022" },
            { id: 3, name: "acmesolutions.net", status: "Pending", primary: false, added: "May 10, 2023" }
        ];

        let users = [
            { id: 1, name: "John Doe", email: "john.doe@acmecorp.com", department: "Engineering", role: "Developer", status: "Active" },
            { id: 2, name: "Jane Smith", email: "jane.smith@acmecorp.com", department: "Marketing", role: "Manager", status: "Active" },
            { id: 3, name: "Robert Johnson", email: "robert.j@acmecorp.com", department: "Sales", role: "Representative", status: "Active" },
            { id: 4, name: "Emily Davis", email: "emily.d@acmecorp.com", department: "HR", role: "Specialist", status: "Inactive" },
            { id: 5, name: "Michael Wilson", email: "michael.w@acmecorp.com", department: "Engineering", role: "Team Lead", status: "Active" }
        ];

        let admins = [
            { id: 1, name: "Alex Johnson", email: "alex.j@acmecorp.com", role: "Super Admin", permissions: "Full Access", lastActive: "Today, 10:30 AM" },
            { id: 2, name: "Sarah Williams", email: "sarah.w@acmecorp.com", role: "System Admin", permissions: "Limited Access", lastActive: "Yesterday, 3:45 PM" },
            { id: 3, name: "David Miller", email: "david.m@acmecorp.com", role: "Department Admin", permissions: "Engineering Only", lastActive: "May 20, 2023, 11:20 AM" }
        ];

        let departments = [
            { id: 1, name: "Engineering", head: "Michael Wilson", members: 42, budget: { allocated: "$1,200,000", used: 65 }, projects: 12 },
            { id: 2, name: "Marketing", head: "Jane Smith", members: 18, budget: { allocated: "$800,000", used: 45 }, projects: 8 },
            { id: 3, name: "Sales", head: "Robert Johnson", members: 24, budget: { allocated: "$1,500,000", used: 78 }, projects: 5 },
            { id: 4, name: "Human Resources", head: "Emily Davis", members: 9, budget: { allocated: "$400,000", used: 30 }, projects: 3 }
        ];

        // Groups data
        let groups = [
            {
                id: 1,
                name: "Engineering Team",
                type: "Collaboration Group",
                description: "Software development and engineering team",
                members: 25,
                moderators: ["Alex Johnson", "Michael Wilson"],
                created: "2 weeks ago"
            },
            {
                id: 2,
                name: "Marketing Department",
                type: "Department",
                description: "Marketing and communications department",
                members: 18,
                moderators: ["Jane Smith"],
                departmentHead: "Jane Smith",
                created: "1 month ago"
            },
            {
                id: 3,
                name: "Project Alpha",
                type: "Collaboration Group",
                description: "Cross-functional team for Project Alpha",
                members: 12,
                moderators: ["Robert Johnson"],
                created: "1 week ago"
            }
        ];

        // Work Locations data
        let workLocations = [
            {
                id: 1,
                name: "New York Headquarters",
                street: "123 Tech Avenue",
                city: "New York",
                state: "New York",
                zip: "10001",
                country: "United States",
                timezone: "EST",
                language: "English",
                primary: true,
                users: 450
            },
            {
                id: 2,
                name: "San Francisco Office",
                street: "456 Innovation Drive",
                city: "San Francisco",
                state: "California",
                zip: "94105",
                country: "United States",
                timezone: "PST",
                language: "English",
                primary: false,
                users: 280
            },
            {
                id: 3,
                name: "London Office",
                street: "789 Tech Square",
                city: "London",
                state: "England",
                zip: "EC2A 4DP",
                country: "United Kingdom",
                timezone: "GMT",
                language: "English",
                primary: false,
                users: 320
            }
        ];

        // Designations data
        let designations = [
            {
                id: 1,
                name: "Manager",
                users: 15,
                createdOn: "10 days ago",
                assignedUsers: ["John Doe", "Jane Smith"]
            },
            {
                id: 2,
                name: "Developer",
                users: 25,
                createdOn: "2 weeks ago",
                assignedUsers: ["Robert Johnson", "Emily Davis", "Michael Wilson"]
            },
            {
                id: 3,
                name: "Team Lead",
                users: 8,
                createdOn: "1 month ago",
                assignedUsers: ["Alex Johnson"]
            }
        ];

        let currentEditingLocationId = null;

        // DOM Elements
        const directoryHeader = document.getElementById('directory-header');
        const expandIcon = document.getElementById('expand-icon');
        const directorySubmenu = document.getElementById('directory-submenu');
        const submenuItems = document.querySelectorAll('[data-view]');
        const views = {
            default: document.getElementById('default-view'),
            organization: document.getElementById('organization-view'),
            domains: document.getElementById('domains-view'),
            users: document.getElementById('users-view'),
            admins: document.getElementById('admins-view'),
            groups: document.getElementById('groups-view'),
            departments: document.getElementById('departments-view')
        };

        // Tab Elements
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        // Edit form elements
        const editOrganizationBtn = document.getElementById('edit-organization-btn');
        const cancelEditBtn = document.getElementById('cancel-edit-btn');
        const saveOrganizationBtn = document.getElementById('save-organization-btn');
        const organizationReadonly = document.getElementById('organization-readonly');
        const organizationEditForm = document.getElementById('organization-edit-form');

        // Modal Elements
        const modals = {
            domain: document.getElementById('add-domain-modal'),
            user: document.getElementById('add-user-modal'),
            admin: document.getElementById('add-admin-modal'),
            group: document.getElementById('add-group-modal'),
            department: document.getElementById('add-department-modal'),
            location: document.getElementById('add-location-modal'),
            editLocation: document.getElementById('edit-location-modal'),
            designation: document.getElementById('add-designation-modal')
        };

        const modalButtons = {
            domain: document.getElementById('add-domain-btn'),
            user: document.getElementById('add-user-btn'),
            admin: document.getElementById('add-admin-btn'),
            group: document.getElementById('add-group-btn'),
            department: document.getElementById('add-department-btn'),
            location: document.getElementById('add-location-btn'),
            designation: document.getElementById('add-designation-btn')
        };

        const modalForms = {
            domain: document.getElementById('add-domain-form'),
            user: document.getElementById('add-user-form'),
            admin: document.getElementById('add-admin-form'),
            group: document.getElementById('add-group-form'),
            department: document.getElementById('add-department-form'),
            location: document.getElementById('add-location-form'),
            editLocation: document.getElementById('edit-location-form'),
            designation: document.getElementById('add-designation-form')
        };

        const closeButtons = document.querySelectorAll('.modal-close');

        // Groups Functions
        function renderGroups() {
            const tableBody = document.querySelector('#groups-table tbody');
            const emptyState = document.getElementById('groups-empty-state');
            const groupsCount = document.getElementById('groups-count');

            if (!tableBody) return;

            tableBody.innerHTML = '';

            if (groups.length === 0) {
                if (emptyState) emptyState.classList.remove('hidden');
                if (groupsCount) groupsCount.textContent = 'Showing 0 groups';
                return;
            }

            if (emptyState) emptyState.classList.add('hidden');

            groups.forEach(group => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';

                const typeIcon = group.type === 'Department' ?
                    '<i class="fas fa-building text-blue-600 mr-2"></i>' :
                    '<i class="fas fa-users text-green-600 mr-2"></i>';

                row.innerHTML = `
            <td class="py-4 px-4">
                <div>
                    <div class="font-medium">${group.name}</div>
                    ${group.description ? `<div class="text-sm text-gray-500 mt-1">${group.description}</div>` : ''}
                </div>
            </td>
            <td class="py-4 px-4">
                <div class="flex items-center">
                    ${typeIcon}
                    <span>${group.type}</span>
                </div>
            </td>
            <td class="py-4 px-4 text-center">
                <span class="font-medium">${group.members}</span>
            </td>
            <td class="py-4 px-4">
                <div class="flex flex-wrap gap-1">
                    ${group.moderators.map(mod => `<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">${mod}</span>`).join('')}
                </div>
            </td>
            <td class="py-4 px-4">
                <span class="text-gray-600">${group.created}</span>
            </td>
            <td class="py-4 px-4">
                <div class="flex items-center gap-2">
                    <button class="p-1 text-green-600 hover:text-green-800" onclick="editGroup(${group.id})" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="p-1 text-red-500 hover:text-red-700" onclick="deleteGroup(${group.id})" title="Delete">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            </td>
        `;

                tableBody.appendChild(row);
            });

            if (groupsCount) {
                groupsCount.textContent = `Showing ${groups.length} groups`;
            }
        }

        function filterGroups() {
            const searchTerm = document.getElementById('group-search').value.toLowerCase();
            const tableBody = document.querySelector('#groups-table tbody');
            if (!tableBody) return;

            const rows = tableBody.querySelectorAll('tr');

            rows.forEach(row => {
                const groupText = row.textContent.toLowerCase();
                if (groupText.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function toggleGroupTypeFields() {
            const selectedType = document.querySelector('input[name="group-type"]:checked').value;
            const departmentHeadSection = document.getElementById('department-head-section');
            const followerSection = document.getElementById('follower-section');

            if (selectedType === 'department') {
                departmentHeadSection.classList.remove('hidden');
                followerSection.classList.remove('hidden');
            } else {
                departmentHeadSection.classList.add('hidden');
                followerSection.classList.add('hidden');
            }
        }

        function editGroup(groupId) {
            console.log('Edit group:', groupId);
        }

        function deleteGroup(groupId) {
            if (confirm('Are you sure you want to delete this group?')) {
                groups = groups.filter(g => g.id !== groupId);
                renderGroups();
            }
        }

        function handleGroupSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('group-name').value;
            const description = document.getElementById('group-description').value;
            const type = document.querySelector('input[name="group-type"]:checked').value;
            const departmentHead = document.getElementById('department-head').value;

            const newGroup = {
                id: groups.length + 1,
                name,
                type: type === 'department' ? 'Department' : 'Collaboration Group',
                description,
                members: 0,
                moderators: [],
                departmentHead: type === 'department' ? departmentHead : null,
                created: 'Just now'
            };

            groups.push(newGroup);
            renderGroups();
            closeAllModals();

            modalForms.group.reset();
            toggleGroupTypeFields();
        }

        // Initialize the page
        function init() {
            renderDomains();
            renderUsers();
            renderAdmins();
            renderGroups();
            renderDepartments();
            renderWorkLocations();
            renderDesignations();
            updateDepartmentStats();
            setupEventListeners();
        }

        // Event Listeners
        function setupEventListeners() {
            // Directory menu toggle
            directoryHeader.addEventListener('click', toggleDirectoryMenu);

            // Submenu item clicks
            submenuItems.forEach(item => {
                item.addEventListener('click', () => {
                    const viewName = item.getAttribute('data-view');
                    showView(viewName);

                    // Update active state
                    submenuItems.forEach(i => i.classList.remove('bg-green-100', 'text-green-600'));
                    item.classList.add('bg-green-100', 'text-green-600');
                });
            });

            // Tab button clicks
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabName = button.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });

            // Edit organization functionality
            if (editOrganizationBtn) editOrganizationBtn.addEventListener('click', showEditForm);
            if (cancelEditBtn) cancelEditBtn.addEventListener('click', hideEditForm);
            if (saveOrganizationBtn) saveOrganizationBtn.addEventListener('click', saveOrganization);

            // Modal open buttons
            if (modalButtons.domain) modalButtons.domain.addEventListener('click', () => openModal('domain'));
            if (modalButtons.user) modalButtons.user.addEventListener('click', () => openModal('user'));
            if (modalButtons.admin) modalButtons.admin.addEventListener('click', () => openModal('admin'));
            if (modalButtons.group) modalButtons.group.addEventListener('click', () => openModal('group'));
            if (modalButtons.department) modalButtons.department.addEventListener('click', () => openModal('department'));
            if (modalButtons.location) modalButtons.location.addEventListener('click', () => openModal('location'));
            if (modalButtons.designation) modalButtons.designation.addEventListener('click', () => openModal('designation'));

            // Modal close buttons
            closeButtons.forEach(button => {
                button.addEventListener('click', closeAllModals);
            });

            // Modal overlay click to close
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', closeAllModals);
            });

            // Form submissions
            if (modalForms.domain) modalForms.domain.addEventListener('submit', handleDomainSubmit);
            if (modalForms.user) modalForms.user.addEventListener('submit', handleUserSubmit);
            if (modalForms.admin) modalForms.admin.addEventListener('submit', handleAdminSubmit);
            if (modalForms.group) modalForms.group.addEventListener('submit', handleGroupSubmit);
            if (modalForms.department) modalForms.department.addEventListener('submit', handleDepartmentSubmit);
            if (modalForms.location) modalForms.location.addEventListener('submit', handleLocationSubmit);
            if (modalForms.editLocation) modalForms.editLocation.addEventListener('submit', handleEditLocationSubmit);
            if (modalForms.designation) modalForms.designation.addEventListener('submit', handleDesignationSubmit);

            // Group type radio button change
            const groupTypeRadios = document.querySelectorAll('input[name="group-type"]');
            groupTypeRadios.forEach(radio => {
                radio.addEventListener('change', toggleGroupTypeFields);
            });

            // Search functionality
            const locationSearch = document.getElementById('location-search');
            if (locationSearch) {
                locationSearch.addEventListener('input', filterLocations);
            }

            const designationSearch = document.getElementById('designation-search');
            if (designationSearch) {
                designationSearch.addEventListener('input', filterDesignations);
            }

            const groupSearch = document.getElementById('group-search');
            if (groupSearch) {
                groupSearch.addEventListener('input', filterGroups);
            }

            // Form validation for edit form
            const editFormInputs = document.querySelectorAll('#organization-edit-form input, #organization-edit-form textarea, #organization-edit-form select');
            editFormInputs.forEach(input => {
                input.addEventListener('blur', function () {
                    validateField(this);
                });
            });
        }

        // Toggle Directory Menu
        function toggleDirectoryMenu() {
            const isExpanded = directorySubmenu.classList.contains('hidden');

            if (isExpanded) {
                directorySubmenu.classList.remove('hidden');
                expandIcon.classList.remove('fa-chevron-right');
                expandIcon.classList.add('fa-chevron-down');
            } else {
                directorySubmenu.classList.add('hidden');
                expandIcon.classList.remove('fa-chevron-down');
                expandIcon.classList.add('fa-chevron-right');
            }
        }

        // Show View
        function showView(viewName) {
            // Hide all views
            Object.values(views).forEach(view => view.classList.add('hidden'));

            // Show selected view
            views[viewName].classList.remove('hidden');

            // If showing organization view, ensure the first tab is active and readonly mode
            if (viewName === 'organization') {
                switchTab('info');
                hideEditForm();
            }
        }

        // Switch Tab
        function switchTab(tabName) {
            // Remove active class from all tab buttons
            tabButtons.forEach(button => {
                button.classList.remove('active', 'text-green-700', 'border-green-500');
                button.classList.add('hover:text-green-700');
            });

            // Add active class to clicked tab button
            const activeButton = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeButton) {
                activeButton.classList.add('active', 'text-green-700', 'border-green-500');
                activeButton.classList.remove('hover:text-green-700');
            }

            // Hide all tab contents
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            // Show selected tab content
            const activeContent = document.getElementById(`${tabName}-content`);
            if (activeContent) {
                activeContent.classList.add('active');
            }
        }

        // Organization Edit Functions
        function showEditForm() {
            if (organizationReadonly && organizationEditForm) {
                organizationReadonly.classList.add('hidden');
                organizationEditForm.classList.remove('hidden');
            }
        }

        function hideEditForm() {
            if (organizationEditForm && organizationReadonly) {
                organizationEditForm.classList.add('hidden');
                organizationReadonly.classList.remove('hidden');
            }
        }

        function saveOrganization(e) {
            e.preventDefault();

            // Collect form data
            // Collect form data
            const formData = {
                companyName: document.getElementById('company-name').value,
                companyType: document.getElementById('company-type').value,
                orgId: document.getElementById('org-id').value,
                founded: document.getElementById('founded').value,
                headquarters: document.getElementById('headquarters').value,
                employees: document.getElementById('employees').value,
                sagaUrl: document.getElementById('saga-url').value,
                website: document.getElementById('website').value,
                industry: document.getElementById('industry').value,
                // description: document.getElementById('description').value,
                primaryEmail: document.getElementById('primary-email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value
            };

            // Store data in localStorage
            localStorage.setItem('organizationData', JSON.stringify(formData));

            // Update readonly view with new data
            updateReadonlyView(formData);

            console.log('Saving organization data:', formData);
            

            // Show success message
            showNotification('Organization information updated successfully!', 'success');

            // Hide edit form and show readonly view
            hideEditForm();
        }

        function updateReadonlyView(data) {
            // Update readonly elements with new data
            document.getElementById('readonly-company-name').textContent = data.companyName;
            document.getElementById('readonly-company-type').textContent = data.companyType;
            document.getElementById('readonly-org-id').textContent = data.orgId;

            // Format date for display
            const foundedDate = new Date(data.founded);
            const formattedDate = foundedDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('readonly-founded').textContent = formattedDate;

            document.getElementById('readonly-headquarters').textContent = data.headquarters;
            document.getElementById('readonly-employees').textContent = parseInt(data.employees).toLocaleString();
            document.getElementById('readonly-saga-url').textContent = data.sagaUrl;
            document.getElementById('readonly-website').textContent = data.website;
            document.getElementById('readonly-industry').textContent = data.industry;
            document.getElementById('readonly-primary-email').textContent = data.primaryEmail;
            document.getElementById('readonly-phone').textContent = data.phone;
            document.getElementById('readonly-address').textContent = data.address;
        }

        // Field validation
        function validateField(field) {
            const value = field.value.trim();

            // Remove existing error styling
            field.classList.remove('border-red-500', 'ring-red-500');

            // Basic validation
            if (field.hasAttribute('required') && !value) {
                field.classList.add('border-red-500');
                return false;
            }

            // Email validation
            if (field.type === 'email' && value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(value)) {
                    field.classList.add('border-red-500');
                    return false;
                }
            }

            // URL validation
            if (field.type === 'url' && value) {
                try {
                    new URL(value.startsWith('http') ? value : 'https://' + value);
                } catch {
                    field.classList.add('border-red-500');
                    return false;
                }
            }

            return true;
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-md shadow-lg z-50 ${type === 'success' ? 'bg-green-500 text-white' :
                    type === 'error' ? 'bg-red-500 text-white' :
                        'bg-blue-500 text-white'
                }`;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Modal Functions
        function openModal(modalType) {
            if (modals[modalType]) {
                modals[modalType].classList.remove('opacity-0', 'pointer-events-none');
                document.body.classList.add('modal-active');
            }
        }

        function closeAllModals() {
            Object.values(modals).forEach(modal => {
                if (modal) {
                    modal.classList.add('opacity-0', 'pointer-events-none');
                }
            });
            document.body.classList.remove('modal-active');
            currentEditingLocationId = null;
        }

        // Designations Functions
        function renderDesignations() {
            const tableBody = document.getElementById('designations-table-body');
            const emptyState = document.getElementById('designations-empty-state');

            if (!tableBody) return;

            tableBody.innerHTML = '';

            if (designations.length === 0) {
                if (emptyState) emptyState.classList.remove('hidden');
                return;
            }

            if (emptyState) emptyState.classList.add('hidden');

            designations.forEach(designation => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';

                row.innerHTML = `
                <td class="py-4 px-4">
                    <div class="font-medium">${designation.name}</div>
                </td>
                <td class="py-4 px-4 text-center">
                    <span class="font-medium">${designation.users}</span>
                </td>
                <td class="py-4 px-4">
                    <span class="text-gray-600">${designation.createdOn}</span>
                </td>
                <td class="py-4 px-4">
                    <div class="flex items-center gap-2">
                        <button class="p-1 text-red-500 hover:text-red-700" onclick="deleteDesignation(${designation.id})" title="Delete">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </td>
            `;

                tableBody.appendChild(row);
            });
        }

        function filterDesignations() {
            const searchTerm = document.getElementById('designation-search').value.toLowerCase();
            const tableBody = document.getElementById('designations-table-body');
            if (!tableBody) return;

            const rows = tableBody.querySelectorAll('tr');

            rows.forEach(row => {
                const designationText = row.textContent.toLowerCase();
                if (designationText.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function deleteDesignation(designationId) {
            if (confirm('Are you sure you want to delete this designation?')) {
                designations = designations.filter(d => d.id !== designationId);
                renderDesignations();
            }
        }

        // Work Locations Functions
        function renderWorkLocations() {
            const tableBody = document.getElementById('locations-table-body');
            const emptyState = document.getElementById('locations-empty-state');

            if (!tableBody) return;

            tableBody.innerHTML = '';

            if (workLocations.length === 0) {
                if (emptyState) emptyState.classList.remove('hidden');
                return;
            }

            if (emptyState) emptyState.classList.add('hidden');

            workLocations.forEach(location => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';

                const fullAddress = `${location.street}, ${location.city}, ${location.state} ${location.zip}, ${location.country}`;

                row.innerHTML = `
                <td class="py-4 px-4">
                    <div>
                        <div class="flex items-center gap-2">
                            <span class="font-medium">${location.name}</span>
                            ${location.primary ? '<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Primary</span>' : ''}
                        </div>
                        <div class="text-sm text-gray-500 mt-1">${fullAddress}</div>
                    </div>
                </td>
                <td class="py-4 px-4 text-center">
                    <span class="font-medium">${location.users}</span>
                </td>
                <td class="py-4 px-4">
                    <div class="flex items-center gap-2">
                        <button class="p-1 text-green-600 hover:text-green-800" onclick="editLocation(${location.id})" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="p-1 text-red-500 hover:text-red-700" onclick="deleteLocation(${location.id})" title="Delete">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </td>
            `;

                tableBody.appendChild(row);
            });
        }

        function filterLocations() {
            const searchTerm = document.getElementById('location-search').value.toLowerCase();
            const tableBody = document.getElementById('locations-table-body');
            if (!tableBody) return;

            const rows = tableBody.querySelectorAll('tr');

            rows.forEach(row => {
                const locationText = row.textContent.toLowerCase();
                if (locationText.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function editLocation(locationId) {
            const location = workLocations.find(loc => loc.id === locationId);
            if (!location) return;

            currentEditingLocationId = locationId;

            // Populate edit form
            document.getElementById('edit-location-name').value = location.name;
            document.getElementById('edit-location-street').value = location.street;
            document.getElementById('edit-location-city').value = location.city;
            document.getElementById('edit-location-state').value = location.state;
            document.getElementById('edit-location-zip').value = location.zip;
            document.getElementById('edit-location-country').value = location.country;
            document.getElementById('edit-location-timezone').value = location.timezone;
            document.getElementById('edit-location-language').value = location.language;
            document.getElementById('edit-location-primary').checked = location.primary;

            openModal('editLocation');
        }

        function deleteLocation(locationId) {
            if (confirm('Are you sure you want to delete this location?')) {
                workLocations = workLocations.filter(loc => loc.id !== locationId);
                renderWorkLocations();
            }
        }

        // Form Handlers
        function handleDesignationSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('designation-name').value;

            // Add new designation
            const newDesignation = {
                id: designations.length + 1,
                name,
                users: 0,
                createdOn: 'Just now',
                assignedUsers: []
            };

            designations.push(newDesignation);
            renderDesignations();
            closeAllModals();

            // Reset form
            modalForms.designation.reset();
        }

        function handleLocationSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('location-name').value;
            const street = document.getElementById('location-street').value;
            const city = document.getElementById('location-city').value;
            const state = document.getElementById('location-state').value;
            const zip = document.getElementById('location-zip').value;
            const country = document.getElementById('location-country').value;
            const timezone = document.getElementById('location-timezone').value;
            const language = document.getElementById('location-language').value;
            const primary = document.getElementById('location-primary').checked;

            // If setting this location as primary, update other locations
            if (primary) {
                workLocations.forEach(location => {
                    location.primary = false;
                });
            }

            // Add new location
            const newLocation = {
                id: workLocations.length + 1,
                name,
                street,
                city,
                state,
                zip,
                country,
                timezone,
                language,
                primary,
                users: 0
            };

            workLocations.push(newLocation);
            renderWorkLocations();
            closeAllModals();

            // Reset form
            modalForms.location.reset();
        }

        function handleEditLocationSubmit(e) {
            e.preventDefault();

            if (!currentEditingLocationId) return;

            const name = document.getElementById('edit-location-name').value;
            const street = document.getElementById('edit-location-street').value;
            const city = document.getElementById('edit-location-city').value;
            const state = document.getElementById('edit-location-state').value;
            const zip = document.getElementById('edit-location-zip').value;
            const country = document.getElementById('edit-location-country').value;
            const timezone = document.getElementById('edit-location-timezone').value;
            const language = document.getElementById('edit-location-language').value;
            const primary = document.getElementById('edit-location-primary').checked;

            // Find and update the location
            const locationIndex = workLocations.findIndex(loc => loc.id === currentEditingLocationId);
            if (locationIndex !== -1) {
                // If setting this location as primary, update other locations
                if (primary) {
                    workLocations.forEach(location => {
                        location.primary = false;
                    });
                }

                workLocations[locationIndex] = {
                    ...workLocations[locationIndex],
                    name,
                    street,
                    city,
                    state,
                    zip,
                    country,
                    timezone,
                    language,
                    primary
                };

                renderWorkLocations();
                closeAllModals();
            }
        }

        function handleDomainSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('domain-name').value;
            const status = document.getElementById('domain-status').value;
            const primary = document.getElementById('domain-primary').checked;

            // If setting this domain as primary, update other domains
            if (primary) {
                domains.forEach(domain => {
                    domain.primary = false;
                });
            }

            // Add new domain
            const newDomain = {
                id: domains.length + 1,
                name,
                status,
                primary,
                added: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })
            };

            domains.push(newDomain);
            renderDomains();
            closeAllModals();

            // Reset form
            modalForms.domain.reset();
        }

        function handleUserSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const department = document.getElementById('user-department').value;
            const role = document.getElementById('user-role').value;
            const status = document.getElementById('user-status').value;

            // Add new user
            const newUser = {
                id: users.length + 1,
                name,
                email,
                department,
                role,
                status
            };

            users.push(newUser);
            renderUsers();
            closeAllModals();

            // Reset form
            modalForms.user.reset();
        }

        function handleAdminSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('admin-name').value;
            const email = document.getElementById('admin-email').value;
            const role = document.getElementById('admin-role').value;
            const permissions = document.getElementById('admin-permissions').value;

            // Add new admin
            const newAdmin = {
                id: admins.length + 1,
                name,
                email,
                role,
                permissions,
                lastActive: 'Just now'
            };

            admins.push(newAdmin);
            renderAdmins();
            closeAllModals();

            // Reset form
            modalForms.admin.reset();
        }

        function handleDepartmentSubmit(e) {
            e.preventDefault();

            const name = document.getElementById('department-name').value;
            const head = document.getElementById('department-head').value;
            const members = parseInt(document.getElementById('department-members').value);
            const budget = document.getElementById('department-budget').value;
            const projects = parseInt(document.getElementById('department-projects').value);

            // Add new department
            const newDepartment = {
                id: departments.length + 1,
                name,
                head,
                members,
                budget: { allocated: budget, used: 0 },
                projects
            };

            departments.push(newDepartment);
            renderDepartments();
            updateDepartmentStats();
            closeAllModals();

            // Reset form
            modalForms.department.reset();
        }

        // Render Functions
        function renderDomains() {
            const tableBody = document.querySelector('#domains-table tbody');
            if (!tableBody) return;

            tableBody.innerHTML = '';

            domains.forEach(domain => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';

                // Status badge class
                let statusClass = domain.status === 'Verified'
                    ? 'bg-green-100 text-green-800'
                    : 'bg-yellow-100 text-yellow-800';

                row.innerHTML = `
                <td class="py-3 px-4 flex items-center gap-2">
                    ${domain.name}
                    <i class="fas fa-external-link-alt text-gray-400 cursor-pointer"></i>
                </td>
                <td class="py-3 px-4">
                    <span class="px-2 py-1 rounded-full text-xs font-semibold ${statusClass}">
                        ${domain.status}
                    </span>
                </td>
                <td class="py-3 px-4">
                    ${domain.primary
                        ? `<span class="px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800">Primary</span>`
                        : `<button class="px-3 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-100">Set as Primary</button>`
                    }
                </td>
                <td class="py-3 px-4 text-gray-600">${domain.added}</td>
                <td class="py-3 px-4">
                    <div class="flex items-center gap-2">
                        <button class="p-1 text-gray-600 hover:text-gray-900">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="p-1 text-red-500 hover:text-red-700">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </td>
            `;

                tableBody.appendChild(row);
            });

            // Add event listeners for "Set as Primary" buttons
            const setPrimaryButtons = document.querySelectorAll('#domains-table button:not(.p-1)');
            setPrimaryButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    // Find the non-primary domain that corresponds to this button
                    const nonPrimaryDomains = domains.filter(d => !d.primary);
                    if (index < nonPrimaryDomains.length) {
                        // Set all domains to non-primary
                        domains.forEach(d => d.primary = false);
                        // Set the selected domain to primary
                        nonPrimaryDomains[index].primary = true;
                        // Re-render the table
                        renderDomains();
                    }
                });
            });
        }

        function renderUsers() {
            const tableBody = document.querySelector('#users-table tbody');
            if (!tableBody) return;

            tableBody.innerHTML = '';

            users.forEach(user => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';

                // Status badge class
                let statusClass = user.status === 'Active'
                    ? 'bg-green-100 text-green-800'
                    : 'bg-gray-100 text-gray-800';

                row.innerHTML = `
                <td class="py-3 px-4">${user.name}</td>
                <td class="py-3 px-4 text-gray-600">${user.email}</td>
                <td class="py-3 px-4">${user.department}</td>
                <td class="py-3 px-4">${user.role}</td>
                <td class="py-3 px-4">
                    <span class="px-2 py-1 rounded-full text-xs font-semibold ${statusClass}">
                        ${user.status}
                    </span>
                </td>
                <td class="py-3 px-4">
                    <button class="p-1 text-gray-600 hover:text-gray-900">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </td>
            `;

                tableBody.appendChild(row);
            });

            // Update user count
            const usersCount = document.getElementById('users-count');
            if (usersCount) {
                usersCount.textContent = `Showing ${users.length} users`;
            }
        }

        function renderAdmins() {
            const container = document.getElementById('admins-container');
            if (!container) return;

            container.innerHTML = '';

            admins.forEach(admin => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg border shadow-sm overflow-hidden';

                // Get initials for avatar
                const initials = admin.name.split(' ').map(n => n[0]).join('');

                card.innerHTML = `
                <div class="bg-green-500 h-12"></div>
                <div class="px-4 pt-0 pb-5">
                    <div class="flex justify-between -mt-6">
                        <div class="h-12 w-12 rounded-full bg-green-700 text-white flex items-center justify-center border-2 border-white">
                            ${initials}
                        </div>
                        <span class="px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 mt-2">
                            ${admin.role}
                        </span>
                    </div>

                    <h3 class="font-medium text-lg mt-3">${admin.name}</h3>
                    <p class="text-gray-600 text-sm">${admin.email}</p>

                    <div class="mt-4 space-y-2">
                        <div class="flex items-center text-sm">
                            <i class="fas fa-shield-alt mr-2 text-gray-500"></i>
                            <span>${admin.permissions}</span>
                        </div>
                        <div class="flex items-center text-sm">
                            <i class="fas fa-clock mr-2 text-gray-500"></i>
                            <span>Last active: ${admin.lastActive}</span>
                        </div>
                    </div>

                    <div class="mt-4 flex gap-2">
                        <button class="flex-1 px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100">
                            Edit
                        </button>
                        <button class="flex-1 px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100 flex items-center justify-center gap-1">
                            <i class="fas fa-key text-xs"></i>
                            Permissions
                        </button>
                    </div>
                </div>
            `;

                container.appendChild(card);
            });
        }

        function renderDepartments() {
            const container = document.getElementById('departments-container');
            if (!container) return;

            container.innerHTML = '';

            departments.forEach(dept => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg border shadow-sm overflow-hidden';

                card.innerHTML = `
                <div class="p-4">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div>
                            <h3 class="font-medium text-lg">${dept.name}</h3>
                            <p class="text-gray-600 text-sm">Head: ${dept.head}</p>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-1 text-sm">
                                <i class="fas fa-users text-gray-500"></i>
                                <span>${dept.members} members</span>
                            </div>
                            <div class="text-sm">
                                <span>${dept.projects} projects</span>
                            </div>
                            <button class="px-3 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-100 flex items-center gap-1">
                                <i class="fas fa-user-plus text-xs"></i>
                                Add Member
                            </button>
                            <button class="p-1 text-gray-600 hover:text-gray-900">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <div class="mt-4">
                        <div class="flex justify-between text-sm mb-1">
                            <span>Budget: ${dept.budget.allocated}</span>
                            <span>${dept.budget.used}% used</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: ${dept.budget.used}%"></div>
                        </div>
                    </div>
                </div>
            `;

                container.appendChild(card);
            });
        }

        function updateDepartmentStats() {
            // Calculate totals
            const totalDepts = departments.length;
            const totalEmployees = departments.reduce((sum, dept) => sum + dept.members, 0);
            const totalProjects = departments.reduce((sum, dept) => sum + dept.projects, 0);

            // Calculate average budget utilization
            const totalBudgetUsed = departments.reduce((sum, dept) => sum + dept.budget.used, 0);
            const avgBudgetUtilization = Math.round(totalBudgetUsed / departments.length);

            // Update the stats
            const totalDepartmentsEl = document.getElementById('total-departments');
            const totalEmployeesEl = document.getElementById('total-employees');
            const totalProjectsEl = document.getElementById('total-projects');
            const budgetUtilizationEl = document.getElementById('budget-utilization');

            if (totalDepartmentsEl) totalDepartmentsEl.textContent = totalDepts;
            if (totalEmployeesEl) totalEmployeesEl.textContent = totalEmployees;
            if (totalProjectsEl) totalProjectsEl.textContent = totalProjects;
            if (budgetUtilizationEl) budgetUtilizationEl.textContent = `${avgBudgetUtilization}%`;
        }

        // Unique URL message function
        function showUniqueUrlMessage(event, url) {
            const messageElement = document.getElementById('unique-url-message');
            messageElement.textContent = `Unique URL: ${url}`;
            messageElement.classList.remove('hidden');

            // Show to the left of the icon with margin top 10px
            const iconRect = event.target.getBoundingClientRect();
            messageElement.style.top = `${iconRect.top + window.scrollY + 20}px`;
            messageElement.style.left = `${iconRect.left + window.scrollX - messageElement.offsetWidth - 16}px`;

            setTimeout(() => {
                messageElement.classList.add('hidden');
            }, 3000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>